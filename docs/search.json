[
  {
    "objectID": "Tutorial.html",
    "href": "Tutorial.html",
    "title": "Tinyplot Tutorial",
    "section": "",
    "text": "Author bio\n\n\n\n\n\n\nMain Points\n\n\n\nI used to use ggplot2 for almost all my plots, but lately I’ve just used base-R. The tinyplot package, an extension of base-R plots, allows me to do so in a more convenient, pleasant and intuitive manner. Advantages:\n\nAutomatic generation of legends.\nNatural syntax: R ‘formula’ plus ‘|’, the latter evoking conditional probability. E.g. “salary ~ age | sex”, plotting salary against age, with separate curves etc. for men and women.\nOne can even have e.g. ’ | U’ for a continuous U! It then means a color gradient, say for a third variable.\nEasy to add to existing plot. Easy to save plot to disk. Easy faceting.\n\n\n\n\nGeneral Syntax\nRoughly speaking, the call form is\ntidyplot(formula,[optional conditioning], type=plot type, \n   [optional faceting], data=dataset,\n   [optional base-R plot parameters])\nOne can abbreviate tidyplot to plt, and plot type has a typing shortcut as well (see below).\n\n\nExamples\nSo, let’s try it on the svcensus dataset from my qeML package.\n\nsuppressPackageStartupMessages(library(qeML))\ndata(svcensus)\nhead(svcensus,5)\n\n       age     educ occ wageinc wkswrkd gender\n1 50.30082 zzzOther 102   75000      52 female\n2 41.10139 zzzOther 101   12300      20   male\n3 24.67374 zzzOther 102   15400      52 female\n4 50.19951 zzzOther 100       0      52   male\n5 51.18112 zzzOther 100     160       1 female\n\n\nThese are programmers and engineers in the 2000 census. Here occ is one of 6 job categories. My primary interest here is investigating possible sex discrimination in salaries. Note: Census data top-coded income at $300,000.\n\n# plot histograms (area 1.0)\nlibrary(tinyplot)\n\nWarning: package 'tinyplot' was built under R version 4.4.2\n\nwith(svcensus,tinyplot(~wageinc | gender,\n   data=svcensus,type='density'))\n\n\n\n\n\n\n\n\nMen seem to have a slight edge in the middle income levels, but possibly a substantial one at the very high levels.\nSpecifying a plot type via its quoted name is actually a shortcut to calling type_density; same with type_lm and so on.\n\n# fit linear models for income against age\nwith(svcensus,tinyplot(wageinc ~ age | gender,\n   data=svcensus,type='lm')) \n\n\n\n\n\n\n\n\nVery few elderly in Silicon Valley! Thus very wide confidence bands at the older level. Similarly, The wider confidence band for women reflects the fact that women are less numerous in this dataset.\nA clear separation between men and women. But…should we apply a linear model so carelessly? Let’s try a model-free estimate of the regression functions.\n\nwith(svcensus,tinyplot(wageinc ~ age | gender,\n   data=svcensus,type='loess'))\n\n\n\n\n\n\n\n\nWhoa! Never assume a linear model willy-nilly. The true relation is nonmonotonic. One of the factors underlying this nonmonotonicity may be age discrimination.\nAt any rate, men definitely seem to be paid more, particular in their early 40s.\nWe can facet by, say, occupation.\n\nwith(svcensus,tinyplot(wageinc ~ age | gender,\n   data=svcensus,type='loess',facet=~occ))\n\n\n\n\n\n\n\n\nThe male advantage seems to be especially pronounced for occupation code 140.\nLet’s look at the Iranian Churn data in qeML.\n\ndata(IranianChurn)\nwith(svcensus,tinyplot(~Balance | Geography, type='density',data=iranChurn))\n\n\n\n\n\n\n\n\nInteresting! Customers from France and Spain exhibit a bimodal distribution, but those from Germany do not. But this may be due at least in part to the default values. The analyst may wish to explore using nondefault values:\n&gt; args(type_density)\nfunction (bw = \"nrd0\", joint.bw = c(\"mean\", \"full\", \"none\"), \n    adjust = 1, kernel = c(\"gaussian\", \"epanechnikov\", \"rectangular\", \n    \"triangular\", \"biweight\", \"cosine\", \"optcosine\"), n = 512, \n    alpha = NULL) \nThis could be done, say, by the call\nwith(svcensus,tinyplot(~Balance | Geography, \n   type_density(kernel='triangular'),\n   data=iranChurn))\nOne can also apply the general linear model:\n\niranChurn$Exited &lt;- as.numeric(iranChurn$Exited == '1')\nwith(iranChurn,tinyplot(Exited ~ Balance,\n   type=type_glm(family=binomial),data=iranChurn))\n\n\n\n\n\n\n\n\nThe higher the balance, the more likely the customer is to bolt."
  }
]